
# 非集中型構成：P2Pシステム
* 分散アプリケーションにおける多層クライアント/サーバー・アーキテクチャの構成は以下からなる．
  1. ユーザー・インターフェース
  2. 処理コンポーネント
  3. データ管理コンポーネント
* 多くのビジネス環境での分散処理とは，この三層アーキテクチャとして構成することと言える．
  * このタイプを垂直分散と呼ぶ．
    * 垂直分散の特徴は，異なるコンポーネントを異なるマシンに配置することによって達成される．

<br>

* 現代のアーキテクチャでは，クライアントおよびサーバの分散が重要であり，水平分散と呼ぶ．
  * このタイプでは，クライアントやサーバーを物理的または論理的に同等の部分に分割し，各部分は完全なデータセットとして動作し，負荷を分散する．
* この章では，P2Pシステムと呼ばれる水平分散をサポートする最新のシステム・アーキテクチャのクラスを見る．

<br>

* ピアツーピアシステムを構成するプロセスはすべて等しい．
  * つまり，実行に必要な機能は，分散システムを構成する全てのプロセスによって表される．
  * 結果として，プロセス間の相互作用の多くは対称的であり，各プロセスは同時にクライアントとサーバとして動作します（サーバントとも呼ばれる）
  * ノードは各プロセスによって表され，任意の他のノードと直接通信することはできないが，利用可能な通信チャネルを介してメッセージを送信する必要がある．
* この対称的な振る舞いを考えると，P2Pアーキテクチャでは，オーバーレイネットワークにおけるプロセスをどのように構成するかという問題に発展する

<br>

* オーバーレイネットワークには，構造化されたものとそうでないものがある．これらの2つのタイプは，Lua et al．[2005]にいくつか例がある．
  * Buford and Yu [2010]は，さらにさまざまなP2Pシステムの多くが含まれている．
  * Aberer et al [2005]は，異なる種類のP2Pシステムの比較について提供している．
  * Androutsellis-Theotokis and Spinellis [2004]は，コンテンツ配信の観点から行われた調査を提供している．
  * Buford et al． [2009]，Tarkoma [2010]とVu et al． [2010]は，研究のための適切なテキストブックを作成した．

<br>

## 構造型P2Pシステム
* 構造化P2Pシステムでは，リング，ツリー，グリッドなどの特定の決定論的トポロジに従ったオーバーレイでノード(つまり，プロセス)が編成される．
  * オーバーレイは，データを効率的に検索するために使用する．
  * 構造化されたP2Pシステムの特徴は，いわゆるセマンティックフリーインデックスを使用していること．
    * つまり，システムによって維持されるべき各データ項目が一意にキーに関連付けられ，このキーがその後にインデックスとして使用されること．
  * キーにはハッシュ関数を使用するのが一般的である．次のようになる．
```
    key(data item) = hash(data item’s value).  
```

* 今では，ピアツーピアシステム全体が（キー，バリュー）のペアを格納する役割を担っている．
  * 各ノードには，ハッシュ値から識別子が割り当てられ，キーに関連付けられたデータを格納する役割を担う．
  * システムはDHT [Balakrishnan et al。、2003]と略される分散ハッシュテーブルを実装する．
* このアプローチに従うことで，キーを使用してデータをLookupできるようになることが構造化されたP2Pシステムの本質だと言える．
* つまりシステムは，キーを既存のノードにマップするLookup関数の効率的な実装を提供することになる．
```
    existing node = lookup(key).
```
